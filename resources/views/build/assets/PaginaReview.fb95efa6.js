import{M as w}from"./MenuCustom.7f90203e.js";import{r as g,o as l,c as a,a as p,b as e,F as v,g as C,e as _,h,t as c,d as b,w as u,v as x}from"./app.173a6b7c.js";import{_ as k}from"./_plugin-vue_export-helper.cdc0426e.js";const y={data(){return{text_coment:"",text_edit_coment:"",valueModalDelete:{id_coment:"",id_user:""},idUserDash:"",erroComent:"",erroEditComent:"",notifyConfirm:!1}},mounted(){this.transformToHtml(this.review[0].desc_review),this.idUserDash=this.user.id?this.user.id:""},methods:{buttonComentar(){let n=document.querySelector("#botaoComentar"),o=document.querySelector("#botaoCancelar"),s=document.querySelector("#box_form_comentario");s.classList.contains("esconder_elemento")?(s.classList.remove("esconder_elemento"),o.classList.remove("esconder_elemento"),n.classList.add("esconder_elemento")):(s.classList.add("esconder_elemento"),o.classList.add("esconder_elemento"),n.classList.remove("esconder_elemento"))},adicionarComentario(){axios.post("/api/add-coment",{text_coment:this.text_coment,id_user:this.user.id,id_review:location.pathname.split("/")[2]}).then(n=>{this.coments.unshift(n.data[0]),this.buttonComentar()},n=>{this.erroComent=Object.values(n.response.data.errors)[0][0]})},transformToHtml(n){var o=new showdown.Converter;let s=o.makeHtml(n),d=document.querySelector(".desc_review");d.innerHTML=s},editComent(n){let o=document.querySelector("#editar"+n),s=document.querySelector("#excluir"+n),d=document.querySelector("#cancelar"+n),i=document.querySelector("#form_editar"+n);i.classList.contains("esconder_elemento")?(i.classList.remove("esconder_elemento"),d.classList.remove("esconder_elemento"),o.classList.add("esconder_elemento"),s.classList.add("esconder_elemento")):(i.classList.add("esconder_elemento"),d.classList.add("esconder_elemento"),o.classList.remove("esconder_elemento"),s.classList.remove("esconder_elemento"))},sendEditComent(n,o){axios.post("/api/update-coment",{text_coment:this.text_edit_coment,id_user:n,id_coment:o,id_review:location.pathname.split("/")[2]}).then(s=>{for(let d=0;d<this.coments.length;d++)this.coments[d].coments_id==o&&(this.coments[d].text_coment=this.text_edit_coment);this.editComent(o)},s=>{this.erroEditComent=Object.values(s.response.data.errors)[0][0]})},deleteComent(n,o){this.valueModalDelete.id_user=n,this.valueModalDelete.id_coment=o},sendDeleteComent(){let n={id_coment:this.valueModalDelete.id_coment,id_user:this.valueModalDelete.id_user,id_review:location.pathname.split("/")[2]};console.log(n),axios.post("/api/delete-coment",n).then(o=>{for(let s=0;s<this.coments.length;s++)this.coments[s].coments_id==n.id_coment&&this.coments.splice(s,1);console.log(o),this.notifyConfirm=!0},o=>console.log(o))},navToReview(n){location.href="/review/"+n}},props:["review","seeMore","coments","user"],components:{MenuCustom:w}},L={class:"container"},M={class:"box_title_rate_content_review d-flex"},D={class:"d-block"},S={class:"d-block"},q={class:"box_imd_content_review"},E=["src"],j=e("div",{class:"desc_review"},null,-1),T={id:"content_veja_mais"},U=e("h4",null,"Veja mais",-1),V={class:"row"},H=["onClick"],N={class:"box_img_veja_mais"},R=["src"],B={class:"box_title_rate_veja_mais d-flex"},F={id:"content_coments"},O=e("h4",null,"Coment\xE1rios",-1),P={id:"box_form_comentario",class:"esconder_elemento"},z={key:0,class:"alert alert-danger"},A=e("button",{class:"botao_confirmar"}," Enviar ",-1),G={id:"many_coments"},I={class:"box_user_coment d-flex"},J={class:"box_img_perfil_coment"},K=["src"],Q={class:"name_user"},W={class:"d-flex"},X={class:"coment_text"},Y={key:0,class:"coment_buttons"},Z=["onClick","id"],$=["onClick","id"],ee=["onClick","id"],te=["id"],oe={key:0,class:"alert alert-danger"},se=["onSubmit"],ne=e("button",{class:"botao_confirmar"}," Enviar ",-1),ie={class:"modal",id:"modal_message"},re={class:"modal-dialog"},de={class:"modal-content"},le={class:"modal-body"},ae=e("p",null,"Tem certeza que quer apagar o coment\xE1rio ?",-1),ce={id:"box_button_modal_delete"},me=e("button",{class:"botao_confirmar","data-bs-dismiss":"modal"}," N\xE3o ",-1);function _e(n,o,s,d,i,r){const f=g("MenuCustom");return l(),a(v,null,[p(f,{user:s.user,idUserContext:i.idUserDash},null,8,["user","idUserContext"]),e("div",L,[(l(!0),a(v,null,C(s.review,t=>(l(),a("section",{key:t.reviews_id,id:"content_review"},[e("div",M,[e("h1",null,c(t.name_review),1),e("div",null,c(t.rate),1)]),e("small",D,"by "+c(t.name),1),e("small",S,c(t.date_review),1),e("div",q,[e("img",{src:t.thumb},null,8,E)]),j]))),128)),e("section",T,[U,e("div",V,[(l(!0),a(v,null,C(s.seeMore,t=>(l(),a("div",{key:t.id,class:"col-sm-6 col-md-4 box_veja_mais",onClick:m=>r.navToReview(t.id)},[e("div",N,[e("img",{src:t.thumb},null,8,R)]),e("div",B,[e("h2",null,c(t.name_review),1),e("p",null,c(t.rate),1)])],8,H))),128))])]),e("div",F,[O,_(e("button",{id:"botaoCancelar",class:"botao_cancelar mt-5 esconder_elemento",onClick:o[0]||(o[0]=(...t)=>r.buttonComentar&&r.buttonComentar(...t))}," Cancelar ",512),[[h,s.user]]),_(e("button",{id:"botaoComentar",class:"botao_confirmar mt-5",onClick:o[1]||(o[1]=(...t)=>r.buttonComentar&&r.buttonComentar(...t))}," Comentar ",512),[[h,s.user]]),_(e("div",P,[i.erroComent!==""?(l(),a("div",z,[e("b",null,c(i.erroComent),1)])):b("",!0),e("form",{onSubmit:o[3]||(o[3]=u((...t)=>r.adicionarComentario&&r.adicionarComentario(...t),["prevent"])),action:""},[_(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>i.text_coment=t),type:"text"},null,512),[[x,i.text_coment]]),A],32)],512),[[h,s.user]]),e("div",G,[_(e("p",null," N\xE3o h\xE1 coment\xE1rios para essa publica\xE7\xE3o ",512),[[h,s.coments.length===0]]),(l(!0),a(v,null,C(s.coments,t=>(l(),a("div",{key:t.coment_id,class:"coment"},[e("div",I,[e("div",J,[e("img",{src:t.image_user},null,8,K)]),e("p",Q,c(t.name),1)]),e("div",W,[e("p",X,c(t.text_coment),1),s.user.id==t.fk_id_users?(l(),a("div",Y,[e("a",{onClick:u(m=>r.editComent(t.coments_id),["prevent"]),href:"#",class:"",id:"editar"+t.coments_id}," editar ",8,Z),e("a",{onClick:u(m=>r.deleteComent(t.fk_id_users,t.coments_id),["prevent"]),href:"#",class:"",id:"excluir"+t.coments_id,"data-bs-toggle":"modal","data-bs-target":"#modal_message"}," excluir ",8,$),e("a",{onClick:u(m=>r.editComent(t.coments_id),["prevent"]),href:"#",class:"esconder_elemento",id:"cancelar"+t.coments_id}," cancelar ",8,ee)])):b("",!0)]),e("div",{class:"box_form_editar_comentario esconder_elemento",id:"form_editar"+t.coments_id},[i.erroEditComent!==""?(l(),a("div",oe,[e("b",null,c(i.erroComent),1)])):b("",!0),e("form",{onSubmit:u(m=>r.sendEditComent(t.fk_id_users,t.coments_id),["prevent"])},[_(e("input",{"onUpdate:modelValue":o[4]||(o[4]=m=>i.text_edit_coment=m),type:"text"},null,512),[[x,i.text_edit_coment]]),ne],40,se)],8,te)]))),128))])])]),e("div",ie,[e("div",re,[e("div",de,[e("div",le,[ae,e("div",ce,[me,e("button",{onClick:o[5]||(o[5]=u(t=>r.sendDeleteComent(),["prevent"])),class:"botao_medio","data-bs-dismiss":"modal"}," sim ")])])])])])],64)}const Ce=k(y,[["render",_e]]);export{Ce as default};
